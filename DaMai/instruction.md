# **抢票使用说明**

对于正在售票的演出，代码会自动填写信息下单一直到付款界面，然后可以直接付款，或者关闭代码自动打开的那个浏览器，然后代码会停止，稍后自己去待付款订单里付款即可。

对于还未开售的演出，代码会不断地刷新并尝试购买，一旦开售马上购买，所以可以在开售前半分钟开始运行代码，它会自动刷新页面直到开票。（注意别提前太早开始运行，这会占用比较多电脑的内存）

此代码处理不了需要手动选座、滑块验证的演出。

# **环境设置**

在应用商店下载 Python 3.9

<br>

从网页下载谷歌 Chrome 浏览器

<br>

打开 “chromedriver_download.txt” 里的教程网址，查看自己的 Chrome 浏览器版本。

Windows: 去 chromedriver 下载地址下载相应版本的 chromedriver，把下载下来的 chromedriver.exe 文件放在和 Autoticket.py 同个目录下

Mac: 打开终端执行
```
brew reinstall chromedriver
```

<br>

删除 “cookies.pkl” 文件（如果有）

<br>

# **代码使用**

使用代码，需要修改的文件只有 "config.json"，右键点击该文件，选择 "打开方式"，用 "记事本" 打开即可修改，修改完记得保存。

<br>

P.S. 注意在 "config.json" 里的所有逗号都得是英文逗号。

<br>


## **“config.json”里有各个参数的设置**
“sess”表示场次，可以设置多个场次，会优先抢第一个

示例：
```
"sess": [
        1,
        3
    ],
```
意思是抢第一场和第三场，优先第一场

<br>

“price”表示票价，可以设置多个票价，会优先抢第一个

示例：
```
"price": [
        1,
        2
    ],
```
意思是抢第一第二档票价，优先第一档

<br>

“date”表示日期，“0” 表示没有日期这个选项，所以不选择（一般来说都没有日期选项，因为大麦会把不同日期的演出直接设置成不同的场次）

示例：
```
    "date": 1,
```
意思是抢第一个日期

<br>

“real_name”表示第几个实名购票人，注意要提前填好实名购票人信息，可以设置多个，会一起抢，留空表示无需实名购票

示例：
```
    "real_name": [
        1
    ],
```
意思是用实名购票人列表里的第一个购票人的信息进行抢票

<br>

"nick_name"是抢票用的大麦账号的昵称

<br>

"ticket_num"是抢多少张票，一般几个购票人就几张票

<br>

接下来需要打开要抢的演出的购票网页，把网址复制粘贴到 "target_url" 后面，替换掉原本的网址，注意不要把逗号删掉了

<br>

"browser"表示浏览器类型，“0”对应谷歌浏览器

<br>

## **切换不同的账号抢票**

需要切换账号时，先删掉 “cookies.pkl” 文件，这个文件存储了账号对应的信息，然后输入下列命令运行代码

```
python Autoticket.py
```

在弹窗里扫码登录新的抢票账号，登录成功后文件夹里会多出来新的 “cookies.pkl” 文件 （代码运行报错了没关系，只要有新的“cookies.pkl” 文件生成就行）

<br>

然后修改 "config.json" 里的 "nick_name"，改成新的账号对应的昵称即可。

## **同时登录多个账号抢票**

复制整个 “DaMai” 文件夹，可以命名为 “DaMai1”, “DaMai2” ...，每个文件夹按照上面“切换不同的账号抢票”部分的方法，生成不同账号对应的 “cookies.pkl”，并且修改每个文件夹里的 "config.json" 文件即可。要同时抢票，就在开票前一个个运行每个文件夹里的 “Autoticket.py”，让它们同时保持运行即可。

## **票售罄后持续捡漏**
见 Autoticket.py 代码 235-237 行